<div class="col-md-12">
  <h2>用户管理</h2>
  <div class="group">
    <%= form_tag({controller: "admin/users", action: "index"}, method: "get") do %>
      <p>
        <%= label_tag(:email, "用户：") %>
        <%= text_field_tag(:email, @email) %>
      </p>
      <p>
        <%= label_tag(:agent_rank_id, "等级：") %>
        <%= select_tag(:agent_rank_id, options_from_collection_for_select(@agent_ranks, :id, :name, @agent_rank_id)) %>
      </p>
      <p>
        <%= label_tag(:start_date, "时间：") %>
        <%= date_field_tag(:start_date, @start_date) %> - <%= date_field_tag(:end_date, @end_date) %>
        <%= submit_tag("查询", name: :search) %>
      </p>
    <% end %>
  </div>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>#</th>
        <th>名称</th>
        <th>登录次数</th>
        <th>创建时间</th>
        <th>等级</th>
        <th>余额</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td>#</td>
          <td><%= link_to(user.email, admin_user_path(user)) %></td>
          <td><%= user.sign_in_count %></td>
          <td><%= user.created_at %></td>
          <td><%= user.agent_rank ? user.agent_rank.name : "未设置" %></td>
          <td><%= user.balance! %></td>
          <td>
            <%= link_to("充值", new_deposit_admin_user_path(user), class: "btn btn-sm btn-default")%>
            <%= link_to("配置", new_configure_admin_user_path(user), class: "btn btn-sm btn-default")%>
            <%= link_to("编辑", edit_admin_user_path(user), class: "btn btn-sm btn-default")%>
            <%= link_to("删除", admin_user_path(user),    class: "btn btn-sm btn-default",
                          method: :delete, data: { confirm: "Are you sure?" } )%>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
